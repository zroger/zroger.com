{% if page.url != post.url %}
  {% assign context = 'teaser' %}
{% endif %}
<article class="row" itemscope itemtype="http://schema.org/BlogPosting">
  <div class="span9 pull-right">
    <div class="page-header">
      <h1 itemprop="name">
        <a href="{{ post.url }}" itemprop="url">{{post.title}}</a>
      </h1>
    </div>

    <div itemprop="description">
      {% if post.photo %}
      <div class="photo">
        <a href="{{ post.url }}">
          <img src="{{ site.base-url }}img/photos/content/{{post.photo}}" />
        </a>
      </div>
      {% endif %}

      {% if context == 'teaser' %}
        {{ post.content | preview }}
      {% else %}
        {{ content }}
      {% endif %}
    </div>
  </div>

  <aside class="span3">
    <ul class="unstyled muted">
      <li>
        <i class="icon-calendar"></i>
        <strong>Posted:</strong>
        <time itemprop="datePublished" datetime="{{ post.date | date: "%Y-%m-%d" }}">{{ post.date | date: "%b %e, %Y" }}</time>
      </li>

      <li>
        <i class="icon-tags"></i>
        <strong>Tags:</strong>
        {% for tag in post.tags %}
          <a href="{% category_url tag %}">{{ tag }}</a>{% unless forloop.last %}, {% endunless %}
        {% endfor %}
      </li>
    </ul>
  </aside>

</article>
